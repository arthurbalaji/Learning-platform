{"ast":null,"code":"import React,{useState}from'react';import{useNavigate,Navigate}from'react-router-dom';import{signInWithPopup}from'firebase/auth';import{auth,provider}from'../firebase';import axios from'axios';import useAuth from'../hooks/useAuth';import{CircularProgress,Button,Typography,Box}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[error,setError]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();const isAuthenticated=useAuth();const handleGoogleLogin=async()=>{setLoading(true);try{const result=await signInWithPopup(auth,provider);const user=result.user;const{displayName,email,photoURL}=user;// Check if user exists\nconst userExistsResponse=await axios.get(`http://localhost:8080/users/exists/${email}`);const userExists=userExistsResponse.data;if(!userExists){// User does not exist, create new user\nconst newUser={mailId:email,name:displayName,profilePictureLink:photoURL};await axios.post('http://localhost:8080/users',newUser);}// Navigate to chat history with user email\nnavigate('/chathistory',{state:{email}});}catch(error){setError(error.message);}finally{setLoading(false);}};if(isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/chathistory\"});}return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',height:'100vh'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Login\"}),error&&/*#__PURE__*/_jsx(Typography,{color:\"error\",children:error}),loading?/*#__PURE__*/_jsx(CircularProgress,{}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleGoogleLogin,children:\"Login with Google\"})]});};export default Login;","map":{"version":3,"names":["React","useState","useNavigate","Navigate","signInWithPopup","auth","provider","axios","useAuth","CircularProgress","Button","Typography","Box","jsx","_jsx","jsxs","_jsxs","Login","error","setError","loading","setLoading","navigate","isAuthenticated","handleGoogleLogin","result","user","displayName","email","photoURL","userExistsResponse","get","userExists","data","newUser","mailId","name","profilePictureLink","post","state","message","to","sx","display","flexDirection","alignItems","justifyContent","height","children","variant","gutterBottom","color","onClick"],"sources":["E:/Chatbot(Meta Llama 3.1 8B)/React-frontend/src/components/login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate, Navigate } from 'react-router-dom';\nimport { signInWithPopup } from 'firebase/auth';\nimport { auth, provider } from '../firebase';\nimport axios from 'axios';\nimport useAuth from '../hooks/useAuth';\nimport { CircularProgress, Button, Typography, Box } from '@mui/material';\n\nconst Login = () => {\n    const [error, setError] = useState('');\n    const [loading, setLoading] = useState(false);\n    const navigate = useNavigate();\n    const isAuthenticated = useAuth();\n\n    const handleGoogleLogin = async () => {\n        setLoading(true);\n        try {\n            const result = await signInWithPopup(auth, provider);\n            const user = result.user;\n            const { displayName, email, photoURL } = user;\n\n            // Check if user exists\n            const userExistsResponse = await axios.get(`http://localhost:8080/users/exists/${email}`);\n            const userExists = userExistsResponse.data;\n\n            if (!userExists) {\n                // User does not exist, create new user\n                const newUser = {\n                    mailId: email,\n                    name: displayName,\n                    profilePictureLink: photoURL\n                };\n                await axios.post('http://localhost:8080/users', newUser);\n            }\n\n            // Navigate to chat history with user email\n            navigate('/chathistory', { state: { email } });\n        } catch (error) {\n            setError(error.message);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (isAuthenticated) {\n        return <Navigate to=\"/chathistory\" />;\n    }\n\n    return (\n        <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', height: '100vh' }}>\n            <Typography variant=\"h4\" gutterBottom>\n                Login\n            </Typography>\n            {error && <Typography color=\"error\">{error}</Typography>}\n            {loading ? (\n                <CircularProgress />\n            ) : (\n                <Button variant=\"contained\" color=\"primary\" onClick={handleGoogleLogin}>\n                    Login with Google\n                </Button>\n            )}\n        </Box>\n    );\n};\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}